<?php


class OrderModel
{

    public static function getOrdersList()
    {
        $sql = 'SELECT id, user_name, user_phone, date, status FROM product_order ORDER BY id DESC';
        return DB::getQuery($sql);
    }
    /**
     * Возвращает текстое пояснение статуса для заказа :<br/>
     * <i>1 - Новый заказ, 2 - В обработке, 3 - Доставляется, 4 - Закрыт</i>
     * @param integer $status <p>Статус</p>
     * @return string <p>Текстовое пояснение</p>
     */
    public static function getStatusText($status)
    {
        switch ($status) {
            case '1':
                return 'Новый заказ';
                break;
            case '2':
                return 'В обработке';
                break;
            case '3':
                return 'Доставляется';
                break;
            case '4':
                return 'Закрыт';
                break;
        }
    }
    /**
     * Возвращает заказ с указанным id
     * @param integer $id <p>id</p>
     * @return array <p>Массив с информацией о заказе</p>
     */
    public static function getOrderById($id)
    {
        $sql = 'SELECT * FROM product_order WHERE id = ?';
        return DB::getOneQuery($sql, [$id]);
    }
    /**
     * Удаляет заказ с заданным id
     * @param integer $id <p>id заказа</p>
     * @return boolean <p>Результат выполнения метода</p>
     */
    public static function deleteOrderById($id)
    {
        $sql = 'DELETE FROM product_order WHERE id = ?';
        return DB::setQuery($sql, [$id]);
    }
    /**
     * Редактирует заказ с заданным id
     * @param integer $id <p>id товара</p>
     * @param string $userName <p>Имя клиента</p>
     * @param string $userPhone <p>Телефон клиента</p>
     * @param string $userComment <p>Комментарий клиента</p>
     * @param string $date <p>Дата оформления</p>
     * @param integer $status <p>Статус <i>(включено "1", выключено "0")</i></p>
     * @return boolean <p>Результат выполнения метода</p>
     */
    public static function updateOrderById($id, $userName, $userPhone, $userComment, $date, $status)
    {
        $sql = "UPDATE product_order SET user_name = ?, user_phone = ?, user_comment = ?, date = ?, status = ? WHERE id = ?";
        return DB::setQuery($sql, [$userName, $userPhone, $userComment, $date, $status, $id]);
    }
}